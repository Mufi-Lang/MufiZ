// Basic Matrix Operations Test (Short Version)
// Test fundamental matrix operations with 0-based indexing and flatten() for foreach

print("=== BASIC MATRIX OPERATIONS TEST ===");

// Test 1: Matrix creation and basic properties
print("");
print("Test 1: Matrix creation");
var A = [[1, 2], [3, 4]];
print("Matrix A:");
print(A);

// Test 2: Element access using 0-based indexing
print("");
print("Test 2: Element access (0-based)");
print("A[0][0] = ");
print(A[0][0]);
print("A[0][1] = ");
print(A[0][1]);
print("A[1][0] = ");
print(A[1][0]);
print("A[1][1] = ");
print(A[1][1]);

// Test 3: Matrix_get function (0-based)
print("");
print("Test 3: matrix_get function");
print("matrix_get(A, 0, 0) = ");
print(matrix_get(A, 0, 0));
print("matrix_get(A, 1, 1) = ");
print(matrix_get(A, 1, 1));

// Test 4: Matrix foreach with flatten()
print("");
print("Test 4: foreach with flatten()");
print("Elements in order:");
foreach (element in flatten(A)) {
    print(element);
}

// Test 5: Matrix creation functions
print("");
print("Test 5: Matrix creation functions");
var zeros_mat = zeros(2, 2);
var ones_mat = ones(2, 2);
var eye_mat = eye(2);

print("Zeros matrix:");
print(zeros_mat);
print("Ones matrix:");
print(ones_mat);
print("Identity matrix:");
print(eye_mat);

// Test 6: Matrix calculations
print("");
print("Test 6: Calculations");
var B = [[2, 4], [6, 8]];
print("Matrix B:");
print(B);

var sum = 0;
var count = 0;
foreach (element in flatten(B)) {
    sum = sum + element;
    count = count + 1;
}
print("Sum: ");
print(sum);
print("Count: ");
print(count);
print("Average: ");
print(sum / count);

// Test 7: Matrix modification (0-based)
print("");
print("Test 7: Matrix modification");
var C = zeros(2, 2);
print("Initial matrix C:");
print(C);

C[0][0] = 10;
C[1][1] = 40;
print("After modification:");
print(C);

// Test 8: matrix_set function
print("");
print("Test 8: matrix_set function");
var D = zeros(2, 2);
matrix_set(D, 0, 0, 100);
matrix_set(D, 1, 1, 400);
print("Matrix D after matrix_set:");
print(D);

// Test 9: Mixed operations
print("");
print("Test 9: Mixed operations");
var E = [[1, 3], [2, 4]];
print("Matrix E:");
print(E);

// Find max using foreach
var max_elem = E[0][0];
foreach (element in flatten(E)) {
    if (element > max_elem) {
        max_elem = element;
    }
}
print("Maximum element: ");
print(max_elem);

print("");
print("=== SUMMARY ===");
print("✓ Matrix creation works correctly");
print("✓ 0-based indexing A[row][col] works");
print("✓ matrix_get() and matrix_set() work with 0-based indices");
print("✓ foreach(flatten(matrix)) works correctly");
print("✓ Matrix creation functions work");
print("✓ All methods work together consistently");

print("");
print("=== BASIC MATRIX OPERATIONS TEST COMPLETED ===");
