// Test break and continue in foreach loops

print "Testing break in foreach loop:";
var arr1 = array();
push(arr1, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10);
foreach (item in arr1) {
    if (item == 5) {
        print "Breaking at item = 5";
        break;
    }
    print item;
}
print "After foreach loop with break";
print "";

print "Testing continue in foreach loop:";
var arr2 = array();
push(arr2, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10);
foreach (num in arr2) {
    if (num % 2 == 0) {
        continue;  // Skip even numbers
    }
    print num;  // Should only print odd numbers: 1, 3, 5, 7, 9
}
print "After foreach loop with continue";
print "";

print "Testing nested foreach loops with break and continue:";
var outer = array();
push(outer, "A", "B", "C");
var inner = array();
push(inner, 1, 2, 3, 4, 5);
foreach (letter in outer) {
    print "Outer loop letter = " + letter;
    foreach (number in inner) {
        if (number == 2) {
            continue;  // Skip number 2
        }
        if (number == 4) {
            break;  // Break inner loop at number 4
        }
        print "  Inner loop number = " + number;
    }
}
print "After nested foreach loops";
print "";

// Test with strings
print "Testing foreach with string and continue:";
var names = array();
push(names, "Alice", "Bob", "Charlie", "David", "Eve", "Frank");
foreach (name in names) {
    if (name == "Charlie" or name == "David") {
        continue;  // Skip Charlie and David
    }
    print "Hello, " + name;
}
print "";

// Test with mixed data types
print "Testing foreach with mixed types and break:";
var mixed = array();
push(mixed, 1, "two", 3.14, true, "five", false);
var processed = 0;
foreach (item in mixed) {
    processed = processed + 1;
    if (processed > 3) {
        print "Processed 3 items, breaking";
        break;
    }
    print "Item: " + item;
}
print "Total items processed: " + processed;
print "";

// Test early continue
print "Testing early continue in foreach:";
var numbers = array();
push(numbers, 10, 20, 30, 40, 50);
foreach (n in numbers) {
    if (n < 30) {
        continue;
    }
    print "Number >= 30: " + n;
}
print "";

// Test break in nested foreach with conditions
print "Testing complex nested foreach with break/continue:";
var categories = array();
push(categories, "fruit", "vegetable");
var items = array();
push(items, "apple", "carrot", "banana", "potato", "orange");
foreach (category in categories) {
    print "Category: " + category;
    var count = 0;
    foreach (item in items) {
        if (category == "fruit" and (item == "carrot" or item == "potato")) {
            continue;  // Skip vegetables when looking at fruits
        }
        if (category == "vegetable" and (item == "apple" or item == "banana" or item == "orange")) {
            continue;  // Skip fruits when looking at vegetables
        }
        count = count + 1;
        if (count > 2) {
            break;  // Only show first 2 items per category
        }
        print "  - " + item;
    }
}
print "Done with complex nested foreach";
