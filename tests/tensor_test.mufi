// Test basic tensor functionality

// Test 1D tensor
print "Testing 1D tensor:";
var t1 = tensor1d(5);
tensor_fill(t1, 2.5);
print t1;

// Test 2D tensor  
print "Testing 2D tensor:";
var t2 = tensor2d(3, 4);

// Fill 2D tensor with some values
for(var i = 0; i < 3; i++){
    for(var j = 0; j < 4; j++){
        tensor_set(t2, i, j, double(i * 4 + j + 1));
    }
}
print t2;

// Test 3D tensor
print "Testing 3D tensor:";
var t3 = tensor3d(2, 2, 2);
tensor_fill(t3, 1.0);
print t3;

// Test tensor operations
print "Testing tensor addition:";
var ta = tensor1d(3);
var tb = tensor1d(3);

tensor_set(ta, 0, 1.0);
tensor_set(ta, 1, 2.0);
tensor_set(ta, 2, 3.0);

tensor_set(tb, 0, 4.0);
tensor_set(tb, 1, 5.0);
tensor_set(tb, 2, 6.0);

print "Tensor A:";
print ta;
print "Tensor B:";
print tb;

var tc = tensor_add(ta, tb);
print "A + B:";
print tc;

// Test scalar operations
print "Testing scalar multiplication:";
var td = tensor_scale(ta, 2.0);
print "A * 2:";
print td;

// Test dot product
print "Testing dot product:";
var dot_result = tensor_dot(ta, tb);
print "A Â· B =";
print dot_result;

// Test matrix operations
print "Testing matrix operations:";
var m1 = tensor2d(2, 3);
var m2 = tensor2d(3, 2);

// Fill m1 with [[1, 2, 3], [4, 5, 6]]
tensor_set(m1, 0, 0, 1.0);
tensor_set(m1, 0, 1, 2.0);
tensor_set(m1, 0, 2, 3.0);
tensor_set(m1, 1, 0, 4.0);
tensor_set(m1, 1, 1, 5.0);
tensor_set(m1, 1, 2, 6.0);

// Fill m2 with [[7, 8], [9, 10], [11, 12]]
tensor_set(m2, 0, 0, 7.0);
tensor_set(m2, 0, 1, 8.0);
tensor_set(m2, 1, 0, 9.0);
tensor_set(m2, 1, 1, 10.0);
tensor_set(m2, 2, 0, 11.0);
tensor_set(m2, 2, 1, 12.0);

print "Matrix M1:";
print m1;
print "Matrix M2:";
print m2;

// Test matrix multiplication
var m3 = tensor_matmul(m1, m2);
print "M1 * M2:";
print m3;

// Test transpose
var m1_t = tensor_transpose(m1);
print "M1 transpose:";
print m1_t;